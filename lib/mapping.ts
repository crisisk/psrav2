import fs from 'fs'; import path from 'path'; export type Mapping={tables:Record<string,string>;columns:Record<string,Record<string,string>>}; let cache:Mapping|null=null; export function loadMapping():Mapping{ if(cache) return cache; const p=path.join(process.cwd(),'config','db-mapping.json'); if(!fs.existsSync(p)) throw new Error('db-mapping.json ontbreekt.'); const d=JSON.parse(fs.readFileSync(p,'utf-8')); if(!d.tables||!d.columns) throw new Error('db-mapping.json mist keys'); cache=d; return d;} export function t(n:string){return '"'+n.replace(/"/g,'')+'"'} export function q(n:string){return '"'+n.replace(/"/g,'')+'"'}
